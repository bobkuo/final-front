import{v as he,a as F,u as ye,p as U,b as we,c as _e,d as Se,r as J,s as be,Q as ke}from"./QChip-7DxszJLz.js";import{E as je,G as I,aG as Te,aH as Ce,aI as xe,g as re,r as $,c as y,a0 as Pe,a1 as Oe,aJ as Me,aK as Ee,aL as qe,w as K,P as X,aM as Y,aN as Z,aO as Le,h as ee,aP as Be,K as De,X as He,aQ as te,s as Ie,o as Qe,a9 as Ae,a8 as We,aR as $e,l as oe,m as Q,q as r,f as p,B as d,ac as v,ay as Ve,F as ae,A as Ne,z as Re,ad as C,u as x,L as A,az as se,x as Ge,aS as ze,aa as P}from"./index-ZlmJWsMw.js";import{c as ie}from"./selection-DJuinEMp.js";import{g as ne}from"./index-CH_iu5NA.js";import{_ as Fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W=je({name:"QTooltip",inheritAttrs:!1,props:{...ye,...xe,...I,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...I.transitionShow,default:"jump-down"},transitionHide:{...I.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:F},self:{type:String,default:"top middle",validator:F},offset:{type:Array,default:()=>[14,14],validator:he},scrollTarget:Ce,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Te],setup(e,{slots:a,emit:s,attrs:t}){let i,m;const f=re(),{proxy:{$q:l}}=f,u=$(null),h=$(!1),O=y(()=>U(e.anchor,l.lang.rtl)),M=y(()=>U(e.self,l.lang.rtl)),E=y(()=>e.persistent!==!0),{registerTick:T,removeTick:q}=Pe(),{registerTimeout:S}=Oe(),{transitionProps:k,transitionStyle:L}=Me(e),{localScrollTarget:b,changeScrollEvent:B,unconfigureScrollTarget:n}=we(e,G),{anchorEl:o,canShow:g,anchorEvents:w}=_e({showing:h,configureAnchorEl:pe}),{show:le,hide:D}=Ee({showing:h,canShow:g,handleShow:ue,handleHide:de,hideOnRouteChange:E,processOnMount:!0});Object.assign(w,{delayShow:fe,delayHide:ge});const{showPortal:V,hidePortal:N,renderPortal:ce}=qe(f,u,me,"tooltip");if(l.platform.is.mobile===!0){const c={anchorEl:o,innerRef:u,onClickOutside(_){return D(_),_.target.classList.contains("q-dialog__backdrop")&&He(_),!0}},H=y(()=>e.modelValue===null&&e.persistent!==!0&&h.value===!0);K(H,_=>{(_===!0?Se:J)(c)}),X(()=>{J(c)})}function ue(c){V(),T(()=>{m=new MutationObserver(()=>j()),m.observe(u.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),j(),G()}),i===void 0&&(i=K(()=>l.screen.width+"|"+l.screen.height+"|"+e.self+"|"+e.anchor+"|"+l.lang.rtl,j)),S(()=>{V(!0),s("show",c)},e.transitionDuration)}function de(c){q(),N(),R(),S(()=>{N(!0),s("hide",c)},e.transitionDuration)}function R(){m!==void 0&&(m.disconnect(),m=void 0),i!==void 0&&(i(),i=void 0),n(),Y(w,"tooltipTemp")}function j(){be({targetEl:u.value,offset:e.offset,anchorEl:o.value,anchorOrigin:O.value,selfOrigin:M.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function fe(c){if(l.platform.is.mobile===!0){ie(),document.body.classList.add("non-selectable");const H=o.value,_=["touchmove","touchcancel","touchend","click"].map(z=>[H,z,"delayHide","passiveCapture"]);Z(w,"tooltipTemp",_)}S(()=>{le(c)},e.delay)}function ge(c){l.platform.is.mobile===!0&&(Y(w,"tooltipTemp"),ie(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),S(()=>{D(c)},e.hideDelay)}function pe(){if(e.noParentEvent===!0||o.value===null)return;const c=l.platform.is.mobile===!0?[[o.value,"touchstart","delayShow","passive"]]:[[o.value,"mouseenter","delayShow","passive"],[o.value,"mouseleave","delayHide","passive"]];Z(w,"anchor",c)}function G(){if(o.value!==null||e.scrollTarget!==void 0){b.value=Le(o.value,e.scrollTarget);const c=e.noParentEvent===!0?j:D;B(b.value,c)}}function ve(){return h.value===!0?ee("div",{...t,ref:u,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",t.class],style:[t.style,L.value],role:"tooltip"},De(a.default)):null}function me(){return ee(Be,k.value,ve)}return X(R),Object.assign(f.proxy,{updatePosition:j}),ce}}),Ue=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Je=Ue?window.navigator:void 0;function Ke(){const e=Ie(!1),a=re();return a&&Qe(()=>{e.value=!0},a),e}function Xe(e){const a=Ke();return y(()=>(a.value,!!e()))}function Ye(e={},a={}){const{navigator:s=Je}=a,t=s,i=Xe(()=>t&&"canShare"in t);return{isSupported:i,share:async(f={})=>{if(i.value){const l={...te(e),...te(f)};let u=!1;if(t.canShare&&(u=t.canShare(l)),u)return t.share(l)}}}}const Ze={class:"project-image"},et=["src","alt"],tt={class:"row full-width items-center"},ot={class:"col"},at={class:"row justify-end q-gutter-xs"},st={class:"col-4"},it={class:"row justify-end"},nt={class:"project-content"},rt={class:"project-category"},lt={class:"project-title"},ct={class:"project-description"},ut=["src","alt"],dt={__name:"WorkCard",props:{project:{type:Object,required:!0,validator:e=>e&&typeof e=="object"&&"id"in e&&"title"in e&&"category"in e&&"description"in e&&"image"in e},isReverse:{type:Boolean,default:!1}},setup(e){const a=Ae(),s=We(),t=e,{project:i,isReverse:m}=$e(t),f=$(!1),l=()=>{f.value=!0},u=()=>{f.value=!1},h=y(()=>`${window.location.origin}${window.location.pathname}#/work#project-${t.project.id}`),{share:O,isSupported:M}=Ye({title:`${i.value.title} - Judy的創作世界`,text:`來看看 Judy 的作品：${i.value.description}`,url:h.value}),E=async()=>{if(M.value)try{await O(),a.notify({type:"positive",message:"分享成功！",position:"top",timeout:2e3,icon:"share"})}catch(n){n.name!=="AbortError"&&(console.error("分享失敗:",n),T())}else T()},T=async()=>{try{navigator.clipboard&&window.isSecureContext?(await navigator.clipboard.writeText(h.value),a.notify({type:"positive",message:"連結已複製到剪貼簿！",position:"top",timeout:2e3,icon:"content_copy"})):a.dialog({title:"手動複製連結",message:"請手動複製以下連結：",prompt:{model:h.value,type:"text",readonly:!0},ok:"關閉",persistent:!0})}catch(n){console.error("複製失敗:",n),a.notify({type:"negative",message:"無法複製連結",position:"top",timeout:2e3})}},q=n=>{const g=n.currentTarget.querySelector(".project-content");ne.to(g,{y:-10,duration:.3})},S=n=>{const g=n.currentTarget.querySelector(".project-content");ne.to(g,{y:0,duration:.3})},k=y(()=>!s.isLoggedIn||!s.favorites?!1:s.favorites.includes(t.project.id)),L=async()=>{if(!s.isLoggedIn){a.dialog({title:"需要登入",message:"請先登入帳號才能加入收藏"});return}try{k.value?(await P.favorites({work:t.project.id,action:"remove"}),s.favorites=s.favorites.filter(n=>n!==t.project.id),a.notify({type:"info",message:"已移除收藏",icon:"favorite_border",position:"top",timeout:2e3})):(await P.favorites({work:t.project.id,action:"add"}),s.favorites.push(t.project.id),a.notify({type:"positive",message:"已加入收藏",icon:"favorite",position:"top",timeout:2e3}))}catch(n){console.error("收藏操作失敗:",n),a.notify({type:"negative",message:k.value?"無法移除收藏":"無法加入收藏",position:"top",timeout:2e3})}},b=y(()=>!s.isLoggedIn||!s.goods?!1:s.goods.includes(t.project.id)),B=async()=>{if(!s.isLoggedIn){a.dialog({title:"需要登入",message:"請先登入帳號才能加入按讚"});return}try{b.value?(await P.goods({work:t.project.id,action:"remove"}),s.goods=s.goods.filter(n=>n!==t.project.id)):(await P.goods({work:t.project.id,action:"add"}),s.goods.push(t.project.id))}catch(n){console.error("按讚操作失敗:",n),a.notify({type:"negative",message:b.value?"無法移除按讚":"無法加入按讚",position:"top",timeout:2e3})}};return(n,o)=>(Q(),oe(ae,null,[r("div",{class:Ge(["project-item bg-judy-1",{reverse:v(m)}]),onMouseenter:q,onMouseleave:S},[r("div",Ze,[p(se,{class:"my-card",flat:"",bordered:""},{default:d(()=>[r("img",{src:v(i).image,alt:v(i).title,class:"main-image",onClick:l},null,8,et),p(Ve,{align:v(m)?"left":"right"},{default:d(()=>[r("div",tt,[r("div",ot,[r("div",at,[(Q(!0),oe(ae,null,Ne(v(i).tags,(g,w)=>(Q(),Re(ke,{square:"",color:`judy-${2+w%5}`,"text-color":"white",icon:"tag",key:g},{default:d(()=>[C(x(g),1)]),_:2},1032,["color"]))),128))])]),r("div",st,[r("div",it,[p(A,{flat:"",round:"",color:"red",icon:b.value?"favorite":"favorite_border",onClick:B},{default:d(()=>[p(W,null,{default:d(()=>o[1]||(o[1]=[C("喜歡按讚",-1)])),_:1,__:[1]})]),_:1},8,["icon"]),p(A,{flat:"",round:"",color:"teal",icon:k.value?"bookmark":"bookmark_border",onClick:L},{default:d(()=>[p(W,null,{default:d(()=>o[2]||(o[2]=[C("加入書籤",-1)])),_:1,__:[2]})]),_:1},8,["icon"]),p(A,{flat:"",round:"",color:"primary",icon:"share",onClick:E},{default:d(()=>[p(W,null,{default:d(()=>o[3]||(o[3]=[C("分享作品",-1)])),_:1,__:[3]})]),_:1})])])])]),_:1},8,["align"])]),_:1})]),r("div",nt,[r("div",rt,"－"+x(v(i).category),1),r("h3",lt,x(v(i).title),1),r("p",ct,x(v(i).description),1),r("button",{class:"project-link",onClick:l},o[4]||(o[4]=[r("span",null,"放大看作品",-1),r("svg",{class:"arrow-icon",viewBox:"0 0 24 24"},[r("path",{d:"M5 12h14M12 5l7 7-7 7"})],-1)]))])],34),p(ze,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=g=>f.value=g),maximized:"","transition-show":"none","transition-hide":"none"},{default:d(()=>[p(se,{class:"image-dialog-card bg-black"},{default:d(()=>[r("div",{class:"image-container",onClick:u},[r("img",{src:v(i).image,alt:v(i).title,class:"fullsize-image",onClick:u},null,8,ut)])]),_:1})]),_:1},8,["modelValue"])],64))}},ht=Fe(dt,[["__scopeId","data-v-8d7f2dd8"]]);export{ht as W};
