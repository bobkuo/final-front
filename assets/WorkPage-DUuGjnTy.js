import{E as z,G as E,ai as $,aj as N,g as D,ak as A,c as p,h as y,al as H,am as L,r as b,w as C,o as O,an as R,l as c,m as i,q as r,p as k,f as h,F as w,B as W,u as S,A as P,Q as F,ao as M,a9 as U,z as G}from"./index-BBAEIEvM.js";import{Q as Y,a as J}from"./QCarousel-CNuCnlPj.js";import{Q as K}from"./QBtnToggle-Bs2tvAIO.js";import{g as X}from"./index-CH_iu5NA.js";import{S as Z}from"./ScrollTrigger-C4gmGO9R.js";import{W as ee}from"./WorkCard-ipS9HVL2.js";import{s as te}from"./series-Bk2DTPQQ.js";import{w as oe}from"./work-BuwK2GNq.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./touch-BjYP5sR0.js";import"./selection-CgTOAURz.js";import"./use-fullscreen-B1RhmJKy.js";import"./QBtnGroup-B6HNSmBI.js";import"./QChip-n2RYMg1p.js";const ae=z({name:"QInnerLoading",props:{...$,...E,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(a,{slots:u}){const f=D(),n=N(a,f.proxy.$q),{transitionProps:g,transitionStyle:l}=A(a),s=p(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(n.value===!0?" q-inner-loading--dark":"")),j=p(()=>"q-inner-loading__label"+(a.labelClass!==void 0?` ${a.labelClass}`:""));function d(){const _=[y(L,{size:a.size,color:a.color})];return a.label!==void 0&&_.push(y("div",{class:j.value,style:a.labelStyle},[a.label])),_}function v(){return a.showing===!0?y("div",{class:s.value,style:l.value},u.default!==void 0?u.default():d()):null}return()=>y(H,g.value,v)}}),ne={class:"projects-section"},le={class:"container"},ie={class:"q-pa-md relative-position",style:{"min-height":"50vh"}},re={class:"absolute-bottom custom-caption"},ce={class:"text-h2"},ue={class:"text-subtitle1"},de={key:0,class:"row justify-center q-mt-md"},me={key:0,class:"row justify-center"},ge={class:"col-12"},ve={class:"section-title"},he={key:0,class:"projects-grid col-12 col-md-10"},pe=["id"],fe={key:1,class:"no-works-container"},_e={class:"no-works-message"},ye={__name:"WorkPage",setup(a){X.registerPlugin(Z);const u=R(),f=U(),n=b([]),g=b([]),l=b(!0),s=b(""),j=p(()=>n.value.map(e=>({label:e.name,value:e._id}))),d=p(()=>n.value.find(e=>e._id===s.value)),v=p(()=>g.value.filter(e=>e.category===s.value)),_=e=>({id:e._id,title:e.name,category:d.value?.name||"未分類",description:e.content||"暫無描述",image:e.images?.[0]||"https://via.placeholder.com/600x400?text=No+Image",tags:e.tags||[],statistics:e.statistics||{}}),x=async()=>{const e=u.hash;if(e&&e.startsWith("#project-")){const o=e.replace("#project-",""),t=g.value.find(m=>m._id===o);t?(s.value=t.category,await M(),setTimeout(()=>{Q(o,t)},300)):f.notify({type:"warning",message:"找不到指定的作品",position:"top",timeout:2e3,icon:"warning"})}},Q=(e,o)=>{const t=document.getElementById(`project-${e}`);if(t){const m=t.getBoundingClientRect(),B=m.height,I=window.innerHeight,V=m.top+window.pageYOffset-50-I/2+B/2;window.scrollTo({top:Math.max(0,V),behavior:"smooth"}),f.notify({type:"info",message:`正在查看：${o.name}`,position:"top",timeout:3e3,icon:"visibility",actions:[{label:"關閉",color:"white",handler:()=>{}}]})}};C(()=>u.hash,(e,o)=>{e&&e!==o&&e.startsWith("#project-")&&x()}),C(s,(e,o)=>{e!==o&&e&&(console.log("切換到系列:",d.value?.name),console.log("該系列作品數量:",v.value.length))});const T=async()=>{try{l.value=!0;const e=await te.get();n.value=e.data.series,n.value.length>0&&(s.value=n.value[0]._id)}catch(e){console.error("Error fetching series:",e)}finally{l.value=!1}},q=async()=>{try{l.value=!0;const e=await oe.get();g.value=e.data.works}catch(e){console.error("Error fetching works:",e)}finally{l.value=!1}};return O(async()=>{await T(),await q(),u.hash&&u.hash.startsWith("#project-")?x():n.value.length>0&&(s.value=n.value[0]._id)}),(e,o)=>(i(),c("div",ne,[r("div",le,[r("div",ie,[h(ae,{showing:l.value,label:"載入作品中，請稍候...","label-class":"text-judy-7",color:"judy-2",size:"80px"},null,8,["showing"]),l.value?k("",!0):(i(),c(w,{key:0},[h(Y,{modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=t=>s.value=t),"transition-prev":"slide-right","transition-next":"slide-left",animated:"","control-color":"primary",class:"rounded-borders"},{default:W(()=>[(i(!0),c(w,null,P(n.value,t=>(i(),G(J,{key:t._id,name:t._id,"img-src":t.cover},{default:W(()=>[r("div",re,[r("div",ce,S(t.name),1),r("div",ue,S(t.description),1)])]),_:2},1032,["name","img-src"]))),128))]),_:1},8,["modelValue"]),!l.value&&n.value.length>0?(i(),c("div",de,[h(K,{modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=t=>s.value=t),options:j.value,"toggle-color":"judy-2",color:"white","text-color":"judy-2",unelevated:""},null,8,["modelValue","options"])])):k("",!0)],64))]),!l.value&&d.value?(i(),c("div",me,[r("div",ge,[r("h2",ve,S(d.value.name)+" - 作品集",1)]),v.value.length>0?(i(),c("div",he,[(i(!0),c(w,null,P(v.value,(t,m)=>(i(),c("div",{key:t._id,id:`project-${t._id}`,class:"project-section"},[h(ee,{project:_(t),"is-reverse":m%2===1},null,8,["project","is-reverse"])],8,pe))),128))])):(i(),c("div",fe,[r("div",_e,[h(F,{name:"image",size:"4rem",color:"grey-5"}),o[2]||(o[2]=r("h3",null,"此系列暫無作品",-1)),o[3]||(o[3]=r("p",null,"請選擇其他系列查看作品",-1))])]))])):k("",!0)])]))}},Ee=se(ye,[["__scopeId","data-v-6b2783c8"]]);export{Ee as default};
